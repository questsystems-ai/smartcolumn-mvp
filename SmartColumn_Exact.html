<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SmartColumn — How it works</title>

  <!-- MathJax config must be defined BEFORE loading the script -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <style>
    :root { color-scheme: light; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      line-height: 1.5; color: #111; margin: 2.2rem auto; max-width: 860px; padding: 0 1rem;
    }
    h1 { font-size: 1.75rem; margin: 0 0 0.75rem 0; }
    h2 { font-size: 1.2rem; margin: 1.2rem 0 0.4rem 0; }
    p  { margin: 0.4rem 0 0.6rem 0; }
    code { background: #f6f8fa; padding: 2px 4px; border-radius: 4px; }
    pre code { display: block; padding: 10px; overflow-x: auto; }
    hr { border: 0; border-top: 1px solid #e5e7eb; margin: 1.1rem 0; }
    .content { margin-top: 0.8rem; }
    .printbtn { position: fixed; top: 14px; right: 14px; font-size: 0.9rem; padding: 6px 10px; }
    @media print { .printbtn { display: none; } }
  </style>
</head>
<body>
  <button class="printbtn" onclick="window.print()">Print / Save as PDF</button>
  <h1>SmartColumn — How it works</h1>
  <div id="md" class="content"></div>

  <script>
    // Your Markdown source
    const src = `
Love this question. Here’s the clean, honest story of what Xu et al. actually did to get the $V_S/V_E$ mapping—and how we turn those “orphan” isocratic volumes into a concrete, quantitatively useful column method.

---

## 1) What the paper actually measured and modeled

**Goal in the paper:** quantify the relationship **TLC → CC** in a way you can compute, not guess.

**How they built the data (silica, PE/EA only):**

* They automated **TLC** to measure **Rf** under many **PE:EA** compositions, and separately automated **CC** (same stationary phase) to record **UV traces** from which they compute two volumes for the band:

  * **$V_S$**: the **leading edge** (first appearance at the detector)  
  * **$V_E$**: the **trailing edge** (when it’s finished eluting)

* Experiments were run at a set of **isocratic** compositions (pure PE, 100:1, 50:1, 10:1, 5:1, 2:1, 1:1, pure EA). No gradients here—just controlled points.

**How they turned this into equations (not a black box):**

* Because the TLC and CC datasets weren’t synchronous, they trained **surrogate models** to predict missing points on a uniform grid (features: molecular fingerprints + simple solvent descriptors).
* Then they ran **symbolic regression** (equation discovery) to get simple, interpretable formulas for the **mean** band start and end at any composition in the PE/EA system:

  $$
  \\bar V_S = \\frac{r}{a_s \\cdot RF + b_s},\\quad
  \\bar V_E = \\frac{r}{a_e \\cdot RF + b_e}
  $$

  with $r = \\frac{\\text{PE}}{\\text{PE}+\\text{EA}}$ and special constants for $r=0$ (pure EA).

* They also discovered a **separation index** heatmap that explains the classic TLC **sweet spot**: keeping the product’s TLC **Rf ≈ 0.2–0.3** at the **same** solvent system improves your odds that two bands will be separable on the column.

**Generalization to other columns and compounds:**

* To move from their 4 g reference column to other sizes, they **recalibrate coefficients** $a_s,b_s,a_e,b_e$ with a **small local dataset** (few-shot fit). They also show a per-compound scaling factor that tightens per-molecule accuracy when available.

**Key takeaways:**

* The paper gives you a **physics-lite oracle** that predicts, at any **isocratic** PE/EA composition and your product’s TLC **Rf**, **when the band will arrive** $(V_S)$ and **when it will finish** $(V_E)$.
* It **does not** design your gradient or tell you how much silica to pack. That’s where we translate their outputs into a usable method.

---

## 2) What $V_S$ and $V_E$ mean (and why they differ)

* Real peaks have finite width. At a fixed composition:
  * **$V_S$** marks **arrival** of the band’s front edge.  
  * **$V_E$** marks **completion** of elution (tail off).

**Practically:** predicting both lets you (a) set a stop line, (b) know if your method is about to be **too late** or **too early**, and (c) size gradient steps in **column-volumes** (CV) with confidence.

---

## 3) How we turn the oracle into a run-ready method

**Inputs:** TLC %EA, product **Rf**, and sample mass.

**A) Column sizing (physical units):**
1. Load policy: Standard **20×** sample mass (Conservative **30×**, Efficient **15×**).
2. Packed bed volume: $V_{\\text{packed}} = \\text{silica(g)} / \\rho_{\\text{bulk}}$ (e.g., 0.60 g/mL).
3. Pick a glass ID so **bed ≈ 12 cm** (allow ±2 cm); compute implied height if the ID is fixed.
4. Column volume (void): $CV = \\varepsilon \\cdot V_{\\text{packed}}$ with $\\varepsilon \\approx 0.40$.

**B) Choose final isocratic near TLC:**
Search **TLC ± 10% EA** in **5%** steps; pick the %EA where the oracle’s $V_E$ is ~**4 CV** (inside a sane band window 2–6 CV) while staying close to TLC.

**C) CV-based program:**
- **Pre-equilibrate**: 1 × step volume.  
- **Gradient**: 0 → final %EA in 5% steps.  
  Step volume = **N × CV** (Standard **2**, Conservative **3**, Efficient **1.5**).  
- **Final plateau**: **3 ×** step volume.

**D) Calibrate 3 knobs when you can:**
porosity $\\varepsilon$, the coefficients $(a_s,b_s,a_e,b_e)$ with a few local points, and (optionally) a per-compound scale factor.

---

## 4) Why this beats “peg to TLC and hope”

* **TLC-faithful** yet quantitative.
* **Geometry-aware** via CV so methods scale across columns.
* **Refittable** with a small local dataset.
* **Less waste** by avoiding pathological late/early elutions.

---

## 5) Tiny worked example

TLC **20% EA**, **Rf = 0.30**, **sample 5 g**.  
Load: **100 g** silica → packed **167 mL** → **CV ≈ 67 mL**.  
Final %EA chosen near TLC where $V_E \\approx 4\\,CV$.  
Step volume (Standard): **≈ 134 mL**; Final plateau: **≈ 400 mL**.
`;

    function render() {
      const el = document.getElementById('md');
      el.innerHTML = marked.parse(src);
      if (window.MathJax && window.MathJax.typeset) {
        window.MathJax.typeset();
      }
    }

    // Ensure both scripts are loaded; DOMContentLoaded is enough because we used "defer".
    document.addEventListener('DOMContentLoaded', render);
  </script>
</body>
</html>
